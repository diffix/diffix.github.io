<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Comparison of SynDiffix, Mostly AI, and CTGAN | Open Diffix</title> <meta name="author" content="Open Diffix"> <meta name="description" content="Strong Anonymization for Structured Data. Open. Free. "> <meta name="keywords" content="Diffix, Anonymization, Privacy, Synthetic Data"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?7eb2bb23eedae5da2c9d3ad96310e408"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://www.open-diffix.org/syndiffix-mostlyai-ctgan"> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <img src="/assets/img/logo-flat.png" alt="Open Diffix Logo" width="26" height="26" style="margin-top: -2px; margin-right: 1px;"> <span class="font-weight-bold"> <span style="color: #0eb896;">Open</span> <span style="color: #3385e1;">Diffix</span> </span> </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Home</a> </li> <li class="nav-item "> <a class="nav-link" href="/syndiffix">SynDiffix</a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Comparison of SynDiffix, Mostly AI, and CTGAN</h1> <p class="post-description"></p> </header> <article> <p>Compared to other commercial and open-source data synthesis tools, the strength of SynDiffix is its accuracy. Here we compare the accuracy of open-source SynDiffix with the commercial tool <a href="https://mostly.ai" rel="external nofollow noopener" target="_blank">Mostly AI</a> and the open-source tool CTGAN from <a href="https://sdv.dev/" rel="external nofollow noopener" target="_blank">SDV</a>.</p> <p>For this comparison, we use the <a href="https://data.world/lpetrocelli/czech-financial-dataset-real-anonymized-transactions" rel="external nofollow noopener" target="_blank">Czech banking dataset</a>. See <a href="#how-the-synthetic-data-was-created">here</a> for a description of how we generated the synthetic datasets. Note in particular that we used the tools as they were designed to be used: multiple synthetic datasets for SynDiffix, and single datasets for Mostly AI and CTGAN. See <a href="#how-the-comparison-is-and-isnt-fair">here</a> for a discussion of how this comparison is and isn’t fair.</p> <p>The code for some of the following examples can be found <a href="https://github.com/diffix/syndiffix/blob/main/docs/time-series.ipynb" rel="external nofollow noopener" target="_blank">here</a>.</p> <h2 id="average-account-balance-by-type-of-credit-card">Average account balance by type of credit card</h2> <p>892 of the 4500 bank accounts have credit cards. There are three classes of card, ‘junior’, ‘classic’, and ‘gold’. Here we ask the question, “Does the average account balance differ based on the credit card class?”</p> <p>The following graphs are percentile boxplots (100th, 75th, 50th, 25th, and 0th percentiles, plus outliers) of the average account balance for each account with a credit card. The two plots show the same data, but grouped by synthesis method on the left, and by card type on the right.</p> <p><img src="/assets/img/trans_account_card_clients.avg_balance.card_type.png" alt="SynDiffix usage style" class="img-fluid mx-auto d-block" style="max-width: 650px; width: 100%;"></p> <p>The SynDiffix synthetic data was produced by first computing the average balance per account from the original data to produce a two-column table consisting of the <code class="language-plaintext highlighter-rouge">avg_balance</code> and the <code class="language-plaintext highlighter-rouge">card_type</code>, with one row per account (i.e. not time-series data). This two-column table was then synthesized.</p> <p>From the original data, we see that indeed gold credit card holders have higher average account balances than classic card holders, which in turn are a little higher than junior cord holders. The data for SynDiffix is very close to the original data, and accurately shows the same trend.</p> <p>The data for Mostly AI and CTGAN are less accurate. Both show a slightly higher median balance for gold cards, but fail to show a lower balance for junior cards. Both Mostly AI and CTGAN show a much wider range of average balances, include negative average balances where none should exist.</p> <h2 id="distribution-of-deposit-and-withdrawal-amounts">Distribution of deposit and withdrawal amounts</h2> <p>There are five types of transaction operations. One of them represents deposits (VKLAD), while the other four represent different types of withdrawals (at least as near as we can tell from the Czech translations).</p> <p>The following graph shows the distribution of deposit and withdrawal amounts for all transactions. Each line is independently sorted from largest to smallest amount. The group of lines on the left are for deposits, which are less numerous.</p> <p><img src="/assets/img/trans_account_card_clients.amount.operation.png" alt="SynDiffix usage style" class="img-fluid mx-auto d-block" style="max-width: 400px; width: 100%;"></p> <p>The SynDiffix data was created be first creating a two-column table from the original data consisting of transaction <code class="language-plaintext highlighter-rouge">amount</code> and transaction <code class="language-plaintext highlighter-rouge">type</code>. This was then synthesized to produce the synthetic dataset.</p> <p>The important thing to note is that the SynDiffix lines almost perfectly track the original lines. Note that it was necessary to make the Original line thicker so that it is not completely occluded by the SynDiffix line.</p> <p>For withdrawals, Mostly AI tracks the original data very well until the lower right, where Mostly AI fails to accurately track a series of nearly 200k withdrawals all at around 150 units. Mostly AI also tracks original deposits well, except that there are a small number of small deposits that don’t appear in the original data. CTGAN is substantially less accurate overall.</p> <h2 id="total-transaction-volume-per-month">Total transaction volume per month</h2> <p>The following plot shows the total transaction volume (sum of all transaction amounts) for each month. The two smaller plots zoom in on the two boxed areas.</p> <p><img src="/assets/img/trans_account_card_clients.amount.month.grid.png" alt="SynDiffix usage style" class="img-fluid mx-auto d-block" style="max-width: 600px; width: 100%;"></p> <p>The SynDiffix data was produced by rounding the transaction date to the month, and then producing a two-column table with <code class="language-plaintext highlighter-rouge">month</code> and <code class="language-plaintext highlighter-rouge">amount</code>. This table was then synthesized.</p> <p>Once again, the SynDiffix line tracks the original data almost perfectly. The zoom-in plots show a very slight difference from the original data.</p> <p>Mostly AI tracks the original data quite well until the last year, where it diverges substantially. The two zoom-in boxes show that even where Mostly AI tracks well, it is still substantially less accurate than SynDiffix. The CTGAN line manages to show the correct upward trend, but otherwise is quite inaccurate.</p> <h2 id="distribution-of-maximum-balance-for-all-accounts">Distribution of maximum balance for all accounts</h2> <p>The following plot gives the distribution of the maximum balance for each account. Each line is sorted independently from highest to lowest maximum balance.</p> <p><img src="/assets/img/trans_account_card_clients.max_balance.png" alt="SynDiffix usage style" class="img-fluid mx-auto d-block" style="max-width: 400px; width: 100%;"></p> <p>The SynDiffix data was produced by first computing the maximum balance for each account from the original data, creating a one-column table consisting of the maximum balance, with one row per account. This was then synthesized.</p> <p>The CTGAN line is not shown because it is too far away from the other lines.</p> <p>SynDiffix tracks the original data almost perfectly, with the exception that a small number of the highest maximum balances are not tracked. SynDiffix suppresses these values because they are outliers that pertain to too few accounts. The Mostly AI line is far less accurate.</p> <h2 id="how-the-synthetic-data-was-created">How the synthetic data was created</h2> <p>The Czech banking dataset has seven relational tables. Three of them (loans, orders, and transactions) are time-series tables. The others contain information about clients (banking customers), accounts, and credit cards. To build the synthetic datasets, we joined the client, account, and credit card information with the time-series data to create three extended tables. We then built three synthetic datasets each for Mostly AI and CTGAN from the three extended tables.</p> <p>Our comparison uses only the extended transactions table. It has the following 21 columns:</p> <table> <thead> <tr> <th>Column</th> <th>Source table</th> </tr> </thead> <tbody> <tr> <td>trans_id</td> <td>trans</td> </tr> <tr> <td>account_id</td> <td>trans</td> </tr> <tr> <td>date</td> <td>trans</td> </tr> <tr> <td>type</td> <td>trans</td> </tr> <tr> <td>operation</td> <td>trans</td> </tr> <tr> <td>amount</td> <td>trans</td> </tr> <tr> <td>balance</td> <td>trans</td> </tr> <tr> <td>k_symbol</td> <td>trans</td> </tr> <tr> <td>bank</td> <td>trans</td> </tr> <tr> <td>account</td> <td>trans</td> </tr> <tr> <td>district_id</td> <td>account</td> </tr> <tr> <td>frequency</td> <td>account</td> </tr> <tr> <td>account_date</td> <td>account</td> </tr> <tr> <td>card_type</td> <td>card</td> </tr> <tr> <td>card_issued</td> <td>card</td> </tr> <tr> <td>owner_birth</td> <td>client</td> </tr> <tr> <td>owner_district_id</td> <td>client</td> </tr> <tr> <td>owner_sex</td> <td>client</td> </tr> <tr> <td>disponent_birth</td> <td>client</td> </tr> <tr> <td>disponent_district_id</td> <td>client</td> </tr> <tr> <td>disponent_sex</td> <td>client</td> </tr> </tbody> </table> <p>To make the Mostly AI synthetic dataset, we used the free service available at <a href="https://mostly.ai" rel="external nofollow noopener" target="_blank">mostly.ai</a>. We used the subject-linked option, which captures the time series aspect of the data. We built a synthetic dataset with the same number of accounts (4500) and nearly the same number of rows (1059409) as the original table.</p> <p>To make the CTGAN synthetic dataset, we used the SDV Python tool. SDV has options for synthesizing both time-series and non-time-series, but unfortunately we were unable to make a time-series dataset because our system did not have enough memory (the system had 1.5TB of memory, but this was not enough). Therefore, we used the non-time-series option to build a synthetic dataset with the same number of rows as the original table (1056320), but with around 10k accounts.</p> <p>Both the Mostly AI and CTGAN datasets were built using system defaults.</p> <h2 id="how-the-comparison-is-and-isnt-fair">How the comparison is and isn’t fair</h2> <p>The usage style of SynDiffix is different from that of other synthetic data tools. SynDiffix is designed to remain anonymous no matter how many different synthetic datasets are built from the original data. This allows us to build synthetic datasets containing only the columns of interest for the given analysis question. This maximizes accuracy. We built a separate SynDiffix synthetic dataset for each of the comparison examples.</p> <p>By contrast, we built only a single transactions synthetic dataset each for Mostly AI and CTGAN. All of the comparison examples used these datasets. In principle, we could have also built separate datasets for each comparison example for Mostly AI and CTGAN. Doing so would have resulted in better accuracy (though probably still not as good as SynDiffix, as <a href="https://arxiv.org/abs/2311.09628" rel="external nofollow noopener" target="_blank">this paper</a> shows). In this sense, the comparison is not apples-to-apples.</p> <p>Nevertheless, we choose to make the comparison this way for the following reasons:</p> <h3 id="synthetic-data-products-are-marketed-as-one-size-fits-all">Synthetic data products are marketed as one-size-fits-all</h3> <p>Synthetic data products are marketed as one-size-fits-all: the promise is that a single dataset accurately captures the statistical characteristics of the original data. It seems fair to take this marketing at its word, and use it as it is designed to be used.</p> <h3 id="the-privacy-of-synthetic-data-products-erodes-with-multiple-syntheses">The privacy of synthetic data products erodes with multiple syntheses</h3> <p>Unlike SynDiffix, the anonymity of other synthetic data products weakens with each data synthesis, at least in theory. As such, a comparison of multiple SynDiffix synthetic datasets against a single Mostly AI or CTGAN synthetic dataset is fair from a privacy perspective. Whether generating a large number of synthetic datasets with other products results in real risks in practice is unknown, though it does seem unlikely that generating a relatively small number of datasets leads to practical risks.</p> </article> </div> </div> <footer class="sticky-bottom mt-5"> <div class="container"> © Copyright 2023 Open Diffix. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>